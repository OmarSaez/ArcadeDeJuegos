<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZONA 100: Supervivencia</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.1/dist/peerjs.min.js"></script>
</head>

<body>

    <!-- CAPA OSCURIDAD (Ciclo D√≠a/Noche) -->
    <div id="darkness-overlay"></div>

    <!-- PANTALLA DE CARGA / MEN√ö -->
    <div id="menu-screen">
        <h1>ZONA 100</h1>
        <p class="subtitle">SOBREVIVE 100 D√çAS</p>

        <div class="character-creator">
            <h3>PERSONALIZACI√ìN</h3>
            <canvas id="preview-canvas" width="100" height="100"></canvas>

            <div class="input-group">
                <label>Nickname</label>
                <input type="text" id="p-nick" value="Sobreviviente" maxlength="10">
            </div>

            <div class="row">
                <div class="input-group">
                    <label>Piel</label>
                    <input type="color" id="p-skin" value="#ffdbac" onchange="updatePreview()">
                </div>
                <div class="input-group">
                    <label>Polera</label>
                    <input type="color" id="p-shirt" value="#3b82f6" onchange="updatePreview()">
                </div>
            </div>

            <div class="input-group">
                <label>Estilo de Pelo</label>
                <select id="p-hair-style" onchange="updatePreview()">
                    <option value="none">Calvo</option>
                    <option value="short">Corto</option>
                    <option value="long">Largo</option>
                    <option value="punk">Punk</option>
                    <option value="afro">Afro</option>
                </select>
            </div>
            <div class="input-group">
                <label>Color Pelo</label>
                <input type="color" id="p-hair-color" value="#000000" onchange="updatePreview()">
            </div>
        </div>

        <div class="controls-area">
            <button class="btn-main" onclick="initGame('HOST')">CREAR NUEVA PARTIDA ‚ò¢Ô∏è</button>
            <div class="join-area">
                <input type="text" id="join-code" placeholder="C√ìDIGO DE SALA">
                <button class="btn-sec" onclick="initGame('JOIN')">UNIRSE</button>
            </div>
            <div class="save-area">
                <button class="btn-small" onclick="document.getElementById('file-input').click()">üìÅ CARGAR
                    ARCHIVO</button>
                <input type="file" id="file-input" style="display:none" onchange="loadFromFile(this)">
            </div>
        </div>
    </div>

    <!-- HUD DEL JUEGO -->
    <div id="game-ui" class="hidden">

        <!-- INFO SUPERIOR -->
        <div class="top-bar">
            <div class="stat-box">D√çA: <span id="ui-day">1</span> <span id="ui-time">12:00</span></div>
            <div class="stat-box money">$<span id="ui-money">0</span></div>
            <div class="stat-box hp">HP: <span id="ui-hp">100</span>%</div>
            <div class="stat-box ammo">MUNICI√ìN: <span id="ui-ammo">0</span></div>
            <button class="btn-small danger" onclick="skipPrep()">SALTAR PREPARACI√ìN ‚è©</button>
            <div id="room-code-display" class="stat-box" style="background:#5c6bc0; font-weight:bold; display:none;">
            </div>
        </div>

        <!-- NOTIFICACIONES -->
        <div id="notification-area"></div>

        <!-- INVENTARIO R√ÅPIDO (1-5) -->
        <div class="hotbar-container">
            <div class="shop-btn" onclick="toggleShop()">üõí</div>
            <div class="hotbar-slot active" data-key="1"><span class="key">1</span>
                <div class="icon" id="slot-1">üî´</div>
            </div>
            <div class="hotbar-slot" data-key="2"><span class="key">2</span>
                <div class="icon" id="slot-2"></div>
            </div>
            <div class="hotbar-slot" data-key="3"><span class="key">3</span>
                <div class="icon" id="slot-3"></div>
            </div>
            <div class="hotbar-slot" data-key="4"><span class="key">4</span>
                <div class="icon" id="slot-4"></div>
            </div>
            <div class="hotbar-slot" data-key="5"><span class="key">5</span>
                <div class="icon" id="slot-5"></div>
            </div>
            <div class="backpack-btn" onclick="toggleBackpack()">üéí</div>
        </div>

        <!-- TIENDA -->
        <div id="shop-panel" class="hidden">
            <h2>TIENDA DE SUPERVIVENCIA</h2>
            <div class="shop-tabs">
                <button class="active">Munici√≥n</button>
                <button>Estructuras</button>
                <button>Varios</button>
            </div>
            <div class="shop-grid" id="shop-items">
                <!-- Items Generated by JS -->
            </div>
            <button class="btn-sec" onclick="toggleShop()">CERRAR</button>
        </div>

        <!-- MOCHILA (Oculta) -->
        <div id="backpack-panel" class="hidden">
            <h3>MOCHILA</h3>
            <div class="grid-5x5" id="backpack-grid">
                <!-- Se generar√° con JS -->
            </div>
        </div>

        <!-- MEN√ö PAUSA -->
        <div id="pause-menu" class="hidden">
            <h2>PAUSA</h2>
            <button class="btn-main" onclick="saveToFile()">üíæ EXPORTAR PARTIDA (GUARDAR)</button>
            <div id="pause-code-display" style="margin: 15px 0; font-size: 1.2rem; color: #bde0fe; font-weight: bold;">
            </div>
            <button class="btn-sec" onclick="togglePause()">VOLVER</button>
        </div>
    </div>

    <canvas id="game-canvas"></canvas>

    <script src="game.js"></script>
</body>

</html>